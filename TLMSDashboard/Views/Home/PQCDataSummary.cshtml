@model List<TLMSData.Models.ProductionSummary>
@{
    ViewData["Title"] = "PCQDataSummary Page";
    var Ouput = Newtonsoft.Json.JsonConvert.SerializeObject(Model);
}

<script>
    let data = @Html.Raw(Ouput);
    let jsonData = JSON.stringify(data);
</script>
<form id="filter">
    <div class="form-inline">
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="inputEmail4">Range Date</label>
                <input type="text" name="daterange" id="datepicker" class="form-control w-100" value="01/01/2018 - 01/15/2018" />
            </div>
            <div class="form-group col-md-6">
                <label for="inputPassword4">Line</label>
                <select class="form-control w-100" name="Line" id="linesummary">
                    <option value="ALL">All</option>
                    <option value="L01">L01</option>
                    <option value="L02">L02</option>
                    <option value="L03">L03</option>
                    <option value="L04">L04</option>
                </select>
            </div>
        </div>
    </div>

    <div class="mt-3">
        <button type="submit" class="btn btn-primary mb-2 bg-blue-2">Filter</button>
    </div>
</form>

<div class="mt-3">
    <table class="table table-striped table-bordered">
    <thead class="thead-blue">
        <tr>
            <th data-name="StartTime">StartTime</th>
            <th data-name="EndTime">EndTime</th>
            <th data-name="Line">Line</th>
            <th data-name="Product">Product</th>
            <th data-name="Lot">Lot</th>
            <th data-name="Output">Output</th>
            <th data-name="NG1">NG1</th>
            <th data-name="NG2">NG2</th>
            <th data-name="NG2">NG3</th>
            <th data-name="NG2">NG4</th>
            <th data-name="NG2">NG5</th>
            <th data-name="NotgoodItems">Other NG</th>
            <th data-name="RW1">RW1</th>
            <th data-name="RW2">RW2</th>
            <th data-name="RW3">RW3</th>
            <th data-name="RW4">RW4</th>
            <th data-name="RW5">RW5</th>
            <th data-name="NotgoodItems">Other RW</th>
        </tr>
    </thead>
    <tbody>
        @{
            var index = 0;
            foreach (var productionSumary in Model)
            {
                <tr>
                    <td>@productionSumary.ProductionLine.InspectStart</td>
                    <td>@productionSumary.ProductionLine.InspectEnd</td>
                    <td>@productionSumary.ProductionLine.Line</td>
                    <td>@productionSumary.ProductionLine.Product</td>
                    <td>@productionSumary.ProductionLine.Lot</td>
                    <td>@productionSumary.ProductionLine.Output</td>

                    @{
                        foreach (var notGoodItem in productionSumary.Notgood5Items)
                        {
                            <td>@notGoodItem.Quantity</td>
                        }
                    }
                    <td>
                        <button type="button" class="btn btn-primary bg-blue-2 btn-sm" data-toggle="modal" data-target="#notgoodModal-@index">
                            Other NG
                            <span class="badge badge-light">@productionSumary.NotgoodItems.Count()</span>
                        </button>

                    </td>
                    @{
                        foreach (var reworkItem in productionSumary.Rework5Items)
                        {
                            <td>@reworkItem.Quantity</td>
                        }
                    }
                    <td>
                        <button type="button" class="btn btn-primary bg-blue-2 btn-sm" data-toggle="modal" data-target="#rewordModal-@index">
                            Other RW
                            <span class="badge badge-light">@productionSumary.ReworkItems.Count()</span>
                        </button>

                    </td>
                </tr>

                {
                    index = index + 1;
                }
            }
        }
    </tbody>
    </table>

    @{
        var indexNotGood = 0;
        foreach (var productionSumary in Model)
        {
            <!-- Modal -->
            <div class="modal fade" id="notgoodModal-@indexNotGood" tabindex="1" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Not Good Items</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <table class="table table-striped table-bordered">
                                <thead class="thead-blue">
                                    <tr>
                                        <th data-name="DefectCode">DefectCode</th>
                                        <th data-name="Quantity">Quantity</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @{
                                        foreach (var notGoodItem in productionSumary.NotgoodItems)
                                        {
                                            <tr>
                                                <td>@notGoodItem.DefectCode</td>
                                                <td>@notGoodItem.Quantity</td>
                                            </tr>
                                           
                                        }
                                    }
                                </tbody>
                            </table>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary bg-blue-2" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>

            {
                indexNotGood = indexNotGood + 1;
            }
        }
    }



    @{
        var indexRW = 0;
        foreach (var productionSumary in Model)
        {
            <!-- Modal -->
            <div class="modal" id="rewordModal-@indexRW" tabindex="1" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Rework Items</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <table class="table table-striped table-bordered">
                                <thead class="thead-blue">
                                    <tr>
                                        <th data-name="DefectCode">DefectCode</th>
                                        <th data-name="Quantity">Quantity</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @{
                                        foreach (var reworkItem in productionSumary.ReworkItems)
                                        {
                                            <tr>
                                                <td>@reworkItem.DefectCode</td>
                                                <td>@reworkItem.Quantity</td>
                                            </tr>

                                        }
                                    }
                                </tbody>
                            </table>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary bg-blue-2" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
            {
                indexRW = indexRW + 1;
            }
        }
    }

</div>


           